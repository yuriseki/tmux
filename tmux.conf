# More inspiration for configuration
# https://github.com/rothgar/awesome-tmux

################################################################################
# Main configuration.
################################################################################
# Configure colors
set-option -g default-terminal "tmux-256color"
set-option -g terminal-overrides ',xterm-256color:RGB'

# Server options
set-option -s focus-events on
set-option -s extended-keys on
set-option -s escape-time 0

################################################################################
# Key bindings.
################################################################################
# Update the leader key.
set -g prefix C-\\ 
bind C-\\ send-prefix
set -g mouse on

# Reload configuration.
unbind r
bind-key r source-file ~/.config/tmux/tmux.conf

# Panes navigation.
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key Left select-pane -L
bind-key Down select-pane -D
bind-key Up select-pane -U
bind-key Right select-pane -R

set-option -g base-index 1
set-option -g pane-base-index 1
set -g renumber-windows on # Keeps widows numbers sequential.
set-option -g history-limit 30000


bind-key c new-window -c "#{pane_current_path}"
bind-key '"' split-window -h -c "#{pane_current_path}"
bind-key '%' split-window -v -c "#{pane_current_path}"



# Popup wundows
bind-key C-i display-popup -E -w 90% -h 90% "mkdir ~/scratches -p && cd ~/scratches/ && touch scratch.md && nvim scratch.md"
bind-key C-p display-popup -E -w 80% -h 50% -d "#{pane_current_path}" ~/.config/tmux/tmux_scratch_toggle.sh


################################################################################
# Styling
# Blluloco color scheme.  
################################################################################
CURSOR_LINE="#384151"
BG="#282C34"
BGFLOAT="#21242D"
FG="#ABB2BF"
CURSOR="#FFCC00"
KEYWORD="#10B1FE"
COMMENT="#636D83"
PUNCTUATION="#7A82DA"
METHOD="#3FC56B"
TYPE="#FF6480"
STRING="#F9C859"
NUMBER="#FF78F8"
CONSTANT="#9F7EFE"
TAG="#3691FF"
ATTRIBUTE="#FF936A"
PROPERTY="#CE9887"
PARAMETER="#8bcdef"
LABEL="#50acae"
MODULE="#FF839B"
RIGHT_END=""
RIGHT_START=""
LEFT_END=""
LEFT_START=""

################################################################################
# Status-bar configuration.
################################################################################
set-option -g set-titles-string "#{pane_title}" # Set the terminal application title
set-option -g status-position top
set-option -g status-style bg=${BGFLOAT},fg=${FG}


# Left content: Session name, Tmux key indicator
set -g status-left-length 150
set-option -g status-left "\
#[bg=${BGFLOAT},fg=${KEYWORD}]#[reverse] #S \
#{?client_prefix, #[bg=${TYPE}]#[noreverse]#[fg=${BGFLOAT}]  #[fg=${BGFLOAT}] , #[bg=${BGFLOAT}]#[fg=${COMMENT}]#[noreverse]    }"


# Show the window list centered between the left and the right section
set-option -g status-justify centre

# Style and set content for the active windows
set-option -g window-status-current-format "\
#[fg=${CURSOR_LINE},bg=${BGFLOAT} ]\
#[fg=${FG},bg=#{CURSOR_LINE}]#I\
#[fg=${TYPE},bold]:\
#[fg=${FG},bg=#{CURSOR_LINE},none]#{b:pane_current_path}\
#[fg=${CURSOR_LINE},bg=${BGFLOAT}]"

# Style and set content for the inactive windows
set-option -g window-status-format "\
 \
#I\
#[fg=${KEYWORD}]:\
#[fg=${FG}]#{b:pane_current_path}\
 \
"

# Right content: Applivation name, Hostname
set-option -g status-right "\
#[bg=${BGFLOAT},fg=${STRING}]#[reverse] #W #[noreverse]\
#[bg=${STRING},fg=${KEYWORD}]#[reverse] #[bg=${BGFLOAT},fg=${KEYWORD}]#h "


################################################################################
# Plugins configuration.
################################################################################
set -g @continuum-restore 'on'
set -g @continuum-save-interval '5' # Save every 5 minutes

################################################################################
# List of plugins
################################################################################
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible' # Better overal configuration
set -g @plugin 'tmux-plugins/tmux-resurrect' # Save and restore sessions
set -g @plugin 'tmux-plugins/tmux-continuum' # Auto restore session

run '~/.config/tmux/plugins/tpm/tpm'
