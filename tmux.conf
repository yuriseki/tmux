# More inspiration for configuration
# https://github.com/rothgar/awesome-tmux

# Configure colors
set-option -g default-terminal "tmux-256color"
set-option -g terminal-overrides ',xterm-256color:RGB'

# Reload configuration.
unbind r
bind r source-file ~/.config/tmux/tmux.conf

# Update the leader key.
set -g prefix C-\\ 
bind C-\\ send-prefix
set -g mouse on

# Panes navigation.
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key Left select-pane -L
bind-key Down select-pane -D
bind-key Up select-pane -U
bind-key Right select-pane -R

set-option -g base-index 1
set-option -g pane-base-index 1
set -g renumber-windows on # Keeps widows numbers sequential.
set-option -g history-limit 30000

set-option -g set-titles-string "#{pane_title}"

bind-key c new-window -c "#{pane_current_path}"
bind-key '"' split-window -h -c "#{pane_current_path}"
bind-key '%' split-window -v -c "#{pane_current_path}"

# Server options
set-option -s focus-events on
set-option -s extended-keys on
set-option -s escape-time 0


# bind-key C-i display-popup -E -w 60% -h 60% "nvim /tmp/scratch.md"
bind-key C-i display-popup -E -w 90% -h 90% "mkdir ~/scratches -p && cd ~/scratches/ && touch scratch.md && nvim scratch.md"
# Binds Ctrl+o to open a persistent shell pane within the CURRENT session
# bind-key C-o display-popup -w 50% -h 50% ""#-c "#{pane_current_path}"
bind-key C-o display-popup -w 50% -h 50% -d "#{pane_current_path}"

# Binds 'P' (Shift+p after prefix) to open the persistent popup
bind-key p display-popup -w 80% -h 80% -d '#{pane_current_path}' ~/.config/tmux/tmux_scratch_toggle.sh

# bind-key C-o run-shell "~/.config/tmux/tmux_scratch_toggle.sh"
# press your standard tmux key combo to kill the pane (Prefix + x).

# Styling
# BLluloco color scheme.  
BG="#282C34"
BGFLOAT="#21242D"
FG="#ABB2BF"
CURSOR="#FFCC00"
KEYWORD="#10B1FE"
COMMENT="#636D83"
PUNCTUATION="#7A82DA"
METHOD="#3FC56B"
TYPE="#FF6480"
STRING="#F9C859"
NUMBER="#FF78F8"
CONSTANT="#9F7EFE"
TAG="#3691FF"
ATTRIBUTE="#FF936A"
PROPERTY="#CE9887"
PARAMETER="#8bcdef"
LABEL="#50acae"
MODULE="#FF839B"
RIGHT_END=""
RIGHT_START=""
LEFT_END=""
LEFT_START=""
set-option -g status-position top
set-option -g status-style bg=${BGFLOAT},fg=${FG}

# Session name, Tmux key indicator
set-option -g status-left "#[bg=${BGFLOAT},fg=${KEYWORD}]#[reverse] #S #[noreverse]\
#{?client_prefix, , #[fg=${COMMENT}]}"


# Show the window list centered between the left and the right section
set-option -g status-justify centre

# Style and set content for the inactive windows
set-option -g window-status-format "\
 \
#I\
#[fg=${KEYWORD}]:\
#[fg=${FG}]#{b:pane_current_path}\
 \
"

# Style and set content for the active windows
set-option -g window-status-current-format "\
#[fg=${BG},bg=${BGFLOAT} ]\
#[fg=${FG},bg=#{BG}]#I\
#[fg=${TYPE}]:\
#[fg=${FG},bg=#{BG}]#{b:pane_current_path}\
#[fg=${BG},bg=${BGFLOAT}]\
"

# Hostname
set-option -g status-right "\
#[bg=${BGFLOAT},fg=${STRING}]#[reverse] #W #[noreverse]\
#[bg=${STRING},fg=${KEYWORD}]#[reverse] #[bg=${BGFLOAT},fg=${KEYWORD}]#h "
#[bg=${BGFLOAT},fg=${KEYWORD}]#[reverse] #T "
#[bg=${BGFLOAT},fg=${KEYWORD}]#[reverse] #{pane_active} \
#
##The application name
# set-option -g status-left "#[bg=#{BGFLOAT},fg=#{KEYWORD}]#[reverse]#[noreverse]󱀙  "



# Return to default colors.



# TODO: Add floating window based on https://www.youtube.com/watch?v=z9d0r9T7zMo
# Add plugins:
# 1. tmux-sensible
# 2. tmux-resurrect - Salva e restaura sessoes
# 3. tmux-continuuum - Restauracao automatica de sessao
#
# load catppuccin theme ...
# run '~/.config/tmux/plugins/tmux/catppuccin_tmux.conf'


# Theme configuration.
# set -g @catppuccin_flavor 'mocha' # latte, frappe, macchiato or mocha
# %hidden MODULE_NAME="my_custom_module"
#
# set -g "@catppuccin_${MODULE_NAME}_icon" " "
# set -gF "@catppuccin_${MODULE_NAME}_color" "#{E:@thm_pink}"
# set -g "@catppuccin_${MODULE_NAME}_text" "#{pane_current_command}"
#

# Separators
# set -g @catppuccin_window_status_style "rounded" # basic, rounded, slanted, custom, none
# set -g @catppuccin_window_left_separator ""
# set -g @catppuccin_window_middle_separator ""
# set -g @catppuccin_window_right_separator ""

# source "~/.config/tmux/plugins/tmux/utils/status_module.conf"

# set -g status-right "#{E:@catppuccin_status_application}#{E:@catppuccin_status_my_custom_module}"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'catppuccin/tmux#v2.1.3' # See https://github.com/catppuccin/tmux/tags for additional tags

#
#
#
# # Menu styling options
# set -g @catppuccin_menu_selected_style "fg=#{@thm_fg},bold,bg=#{@thm_overlay_0}"
#
# # Pane styling options
# set -g @catppuccin_pane_status_enabled "yes" # set to "yes" to enable or off
# set -g @catppuccin_pane_border_status "yes" # set to "yes" to enable or off
# set -g @catppuccin_pane_border_style "fg=#{@thm_overlay_0}"
# set -g @catppuccin_pane_active_border_style "##{?pane_in_mode,fg=#{@thm_lavender},##{?pane_synchronized,fg=#{@thm_mauve},fg=#{@thm_lavender}}}"
# set -g @catppuccin_pane_left_separator "█"
# set -g @catppuccin_pane_middle_separator "█"
# set -g @catppuccin_pane_right_separator "█"
# set -g @catppuccin_pane_color "#{@thm_green}"
# set -g @catppuccin_pane_background_color "#{@thm_surface_0}"
# set -g @catppuccin_pane_default_text "##{b:pane_current_path}"
# set -g @catppuccin_pane_default_fill "number"
# set -g @catppuccin_pane_number_position "left" # right, left
#
# set -g @catppuccin_window_status_style "rounded" # basic, rounded, slanted, custom, or none
# set -g @catppuccin_window_text_color "#{@thm_surface_0}"
# set -g @catppuccin_window_number_color "#{@thm_overlay_2}"
# set -g @catppuccin_window_text " #T"
# set -g @catppuccin_window_number "#I"
# set -g @catppuccin_window_current_text_color "#{@thm_surface_1}"
# set -g @catppuccin_window_current_number_color "#{@thm_mauve}"
# set -g @catppuccin_window_current_text " #T"
# set -g @catppuccin_window_current_number "#I"
# set -g @catppuccin_window_number_position "left"
# set -g @catppuccin_window_flags "icon" # none, icon, or text
# set -g @catppuccin_window_flags_icon_last " 󰖰" # -
# set -g @catppuccin_window_flags_icon_current " 󰖯" # *
# set -g @catppuccin_window_flags_icon_zoom " 󰁌" # Z
# set -g @catppuccin_window_flags_icon_mark " 󰃀" # M
# set -g @catppuccin_window_flags_icon_silent " 󰂛" # ~
# set -g @catppuccin_window_flags_icon_activity " 󱅫" # #
# set -g @catppuccin_window_flags_icon_bell " 󰂞" # !
# # Matches icon order when using `#F` (`#!~[*-]MZ`)
# set -g @catppuccin_window_flags_icon_format "##{?window_activity_flag,#{E:@catppuccin_window_flags_icon_activity},}##{?window_bell_flag,#{E:@catppuccin_window_flags_icon_bell},}##{?window_silence_flag,#{E:@catppuccin_window_flags_icon_silent},}##{?window_active,#{E:@catppuccin_window_flags_icon_current},}##{?window_last_flag,#{E:@catppuccin_window_flags_icon_last},}##{?window_marked_flag,#{E:@catppuccin_window_flags_icon_mark},}##{?window_zoomed_flag,#{E:@catppuccin_window_flags_icon_zoom},} "
#
# # Status line options
# set -g @catppuccin_status_left_separator ""
# set -g @catppuccin_status_middle_separator ""
# set -g @catppuccin_status_right_separator "█"
# set -g @catppuccin_status_connect_separator "yes" # yes, no
# set -g @catppuccin_status_fill "icon"
# set -g @catppuccin_status_module_bg_color "#{@thm_surface_0}"
#


run '~/.config/tmux/plugins/tpm/tpm'
